namespaceOverride: kube-prometheus

prometheusOperator:
  # This reuses the secret generated by kube-webhook-certgen below (that we've disabled). If
  # we don't also disable TLS here then the prometheus-operator pod will fail to start since
  # that secret won't exist.
  tls:
    enabled: false
  admissionWebhooks:
    # When enabled, the kube-webhook-certgen project is used to generate a self-signed cert
    # into a Kubernetes secret and then patch the admission controller configuration so that
    # it uses the cert. The problem is that all published image versions of kube-webhook-certgen
    # use the v1beta1 API group of MutatingWebhookConfiguration rather than v1 which is now
    # standard. So disabling for now and will replace with cert-manager later.
    enabled: false

prometheus:
  prometheusSpec:
    externalUrl: http://office.00rg.com:8082/prometheus

alertmanager:
  # Note: to manage the Alertmanager config properly as a secret you need to use the
  # alertmanagerSpec field to map in the config as a volume rather than it being specified
  # verbatim in the config field. Could probably use a standard Kubernetes secret or the
  # Secret Store CSI Driver and different secret backends depending on whether you're on
  # the cloud (e.g. https://github.com/aws/secrets-store-csi-driver-provider-aws) or running
  # locally (e.g. https://github.com/hashicorp/vault-csi-provider). Would be ideal to be able
  # to specify the non-secret parts of the config as raw YAML in this repo (see
  # https://github.com/machinezone/configmapsecrets).
  alertmanagerSpec:
    externalUrl: http://office.00rg.com:8082/alertmanager
  config:
    global:
      resolve_timeout: 5m
    route:
      group_by: ['job']
      group_wait: 30s
      group_interval: 5m
      repeat_interval: 12h
      routes:
      - match:
          alertname: InstanceLowMemory
          severity: critical
        receiver: blackhole
      - match:
        receiver: pagerduty
        continue: true
    receivers:
    - name: blackhole
    - name: pagerduty

grafana:
  namespaceOverride: kube-prometheus
  # Disable the Grafana chart tests as because we're not using Helm to do the deployment the
  # tests will start running immediately and then fail.
  testFramework:
    enabled: false
  grafana.ini:
    server:
      root_url: http://office.00rg.com:8082/grafana
  datasources:
    datasources.yaml:
      apiVersion: 1
      datasources:
      - name: Loki
        type: loki
        url: http://loki.loki:3100

kube-state-metrics:
  namespaceOverride: kube-prometheus

prometheus-node-exporter:
  namespaceOverride: kube-prometheus
